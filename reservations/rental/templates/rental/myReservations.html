{% extends "layout.html" %}

{% block title %}
    Twoje rezerwacje
{% endblock %}

{% block static %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'rental/style.css' %}">
{% endblock %}

{% block content %}
    <h1>Moje rezerwacje</h1>
    <div class="container">
        {% for rezerwacja in rezerwacje %}
            <div class="panelRezerwacji">
                <p>{{ rezerwacja.auto }}r.</p>
                <p>od: {{ rezerwacja.data_od }}</p>
                <p>do: {{ rezerwacja.data_do }}</p>
                <p>ogolna cena: {{ rezerwacja.cena_ogolna }}zl</p>
                <p>data utworzenia: {{ rezerwacja.data_utworzenia }}</p>
                <img src="{{ rezerwacja.auto.zdjecie.url }}" alt="zdjecie samochodu">

                <p class="statusRez">Status rezerwacji: 
                    <span title="Jeśli rezerwacja będzie zaakceptowana, to już nie możesz jej anulować!">{{ rezerwacja.status }}</span>
                </p>

                {% if rezerwacja.status != 'cancelled'  %}
                    <form action="{% url 'rental:anulujRezerwacje' rezerwacja.pk %}" method="post">
                        {% csrf_token %}
                        <button type="submit">Anuluj rezerwacje</button>
                        {% for message in messages %}
                            <ul>
                                <li class="komunikat">{{ message }}</li>
                            </ul>
                        {% endfor %}
                    </form>
                {% else %}
                    <div class="anulowane">
                        <p>Rezerwacja anulowana</p>
                        <a href="/cars/">Zarezerwuj cos nowego</a>
                    </div>
                {% endif %}
            </div>
        
        {% empty %}
            <div class="empty">
                <p>Nie masz jeszcze rezerwacji</p>
                <a href="/cars/">Wybierz jakieś auto</a>
            </div>
        {% endfor %}
    </div>
{% endblock %}
